<!DOCTYPE html>
<html>

<head>
    <title>Formulário de Atendimento</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://www.gstatic.com/firebasejs/11.1.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.1.0/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js" defer></script>
</head>

<body>
    <header>
        <div class="logo">
            <img src="/img/logo.png" alt="Seu Logo">
        </div>
        <div class="menu-icon" onclick="toggleMenu()">&#9776;</div>
    </header>

    <div class="sidebar" id="mySidebar">
        <a href="#" onclick="closeMenu()"><span class="menu-icon close-icon">&#9776;</span></a>
        <a href="#">Ordens de Serviço</a>
        <a href="#">Consultar</a>
        <a href="#">Cadastrar Usuário</a>
    </div>

    <h1 style="text-align: center;">Formulário de Atendimento</h1>
    <form id="formularioAtendimento">
        <label for="nome">Nome do Cliente:</label>
        <input type="text" id="nome" name="nome" required>

        <label for="datahora">Data e Hora do Atendimento:</label>
        <input type="datetime-local" id="datahora" name="datahora" required>

        <label for="problema">Descrição do Problema:</label>
        <textarea id="problema" name="problema" rows="4" required></textarea>

        <label for="solucao">Solução Apresentada:</label>
        <textarea id="solucao" name="solucao" rows="4"></textarea>

        <label for="observacoes">Observações:</label>
        <textarea id="observacoes" name="observacoes" rows="4"></textarea>

        <button type="submit">Enviar</button>
        <button type="reset">Limpar</button>
    </form>

    <script>
        const formulario = document.getElementById('formularioAtendimento');

        formulario.addEventListener('submit', (event) => {
            event.preventDefault(); // Impede o envio padrão do formulário

            const nome = document.getElementById('nome').value;
            const datahora = document.getElementById('datahora').value;
            const problema = document.getElementById('problema').value;
            const solucao = document.getElementById('solucao').value;
            const observacoes = document.getElementById('observacoes').value;

            db.collection("atendimentos").add({ // Coleção no Firestore
                nome: nome,
                datahora: datahora,
                problema: problema,
                solucao: solucao,
                observacoes: observacoes
            })
                .then(() => {
                    alert("Dados enviados com sucesso!");
                    formulario.reset(); // Limpa o formulário após o envio
                })
                .catch((error) => {
                    console.error("Erro ao enviar dados: ", error);
                    alert("Erro ao enviar dados. Consulte o console.");
                });
        });


    </script>
</body>

</html>